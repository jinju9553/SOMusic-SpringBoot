<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<style type="text/css">
	body {
		background-color: #f2eee5;
	}
	    
	#out {
        width: 1000px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .top_view {
    	border: 1px solid #afafc7;
    	border-radius:3px;
    }
    
    .element {
        margin: 20px;
    }
    
    .titleLink {
    	margin-left: 30px;
    	font-size: 20px;
    }
    
    .info_view {
    	width: 900px;
    	margin-left: auto;
        margin-right: auto;
     	display: flex;
    }
    
    .image {
    	width: 200px;
    	height: 200px;
    	margin-left: 30px;
    	margin-top: 20px;
    }
    
    .info {
    	font-size: 18px;
    	margin-left: 30px;
    }
    
    .btn_view {
    	text-align: right;
    	height: 20px;
    }
    
    .btnUp {
    	font-size: 15px;
    	font-weight: bold;
    	color: #ccabaf;
    	border: none;
    	background: none;
    }
    
    .btnUp:hover {
    	border-bottom: 2px solid #ccabaf;
    }
    
    #line {
    	border:1px #afafc7 solid;
    }
    
    .table_view {
    	width: 900px;
    	margin-left: auto;
        margin-right: auto;
    }
    
    #list {
		border-collapse: collapse;
		text-align: center;
    }
    
    .tb {
    	height: 40px;
    	border-left:1px #afafc7 solid;
    	border-bottom:1px #afafc7 solid;
    }
    
    .tb:first-child {
    	border-left:none;
    }
    
    .tb_mar {
		margin-left: auto;
        margin-right: auto;
        width: 850px;
    }
    
    .first_tr {
    	border-top:2px #afafc7 solid;
    	border-bottom:2px #afafc7 solid;
    	font-weight: bold;
    }
    
    .excel_view {
    	text-align: right;
    	height: 30px;
    }
    
    .ex {
    	font-size: 12px;
    	font-weight: bold;
    	color: #5f7caf;
    	border: none;
    }
    
    .ex:hover {
    	border-bottom: 1px solid #5f7caf;
    }
    
    .status {
    	border: 0;
  		border-bottom: 2px solid #bababf; 
  		background-color: #f2eee5;
  		letter-spacing: 1px;
  		text-align: center;
    }
    
    .status:focus {
    	outline: 0;
		border-bottom-color: #ccabaf;
		color: #ccabaf;
    }
    
    .status:active {
    	outline: 0;
		border-bottom-color: #ccabaf;
		color: #ccabaf;
    }
    
    .statusBtn {
    	font-size: 15px;
    	border: 1px #bababf solid;
    	color: #949494;
    	background-color: #f0f0f0;
    	border-radius: 2px;
    }
    
    .statusBtn:hover {
    	color: #afafc7;
    	background-color: #e0e0e0;
    }
    
</style>
<meta charset="UTF-8">
<title>공구 정보</title>
</head>
<body>
<div th:insert="~{thyme/header}"></div>
<div id="out">
	<div class="top_view">
		<div class="element">
			<h4><a class="titleLink color_purple" th:text="${gp.title}" th:href="@{/join/{id}(id=${gp.gpId})}">제목</a></h4>
		</div>
		<div class="info_view">
			<div class="image">
				<img th:src="@{${gp.image}}" style="width:100%;"/>
			</div>
			<div class="info">
				<div class="element"><p th:text="${gp.title}">제목</p></div>
				<div class="element"><p th:text="${gp.startDate} + '  ~  ' + ${gp.endDate}">시작 ~ 마지막</p></div>
				<div class="element"><p th:text="${gp.price} + ' 원'">가격</p></div>
				<div class="element"><p th:utext="${gp.description}">상세 설명</p></div>
				<div class="element"><p th:text="${gp.category}">해시태그</p></div>
				<div class="element"><p th:text="${gp.bank} + '  ' + ${gp.account}">은행 정보</p></div>
			</div>
		</div>
		<div class="element btn_view">
			<form id="gpUpdate" action="#" method="GET" th:action="@{/gp/update}">
				<input type="hidden" id="gpId" name="gpId" th:value="${gp.gpId}" />
				<input class="btnUp" type="submit" value="수정하기" />
			</form>
		</div>
	</div>
	<div class="element excel_view">
		<!-- 
		<button class="ex" id="excel" onclick="exportReportToExcel(this)">엑셀로 다운 받기</button>
		-->
	</div>
	<div class="table_view">
		<table id="list" class="tb tb_mar">
			<tr class="first_tr">
				<td class="tb">폼 제출 시간</td>
				<td class="tb">이름</td>
				<td class="tb">총 금액</td>
				<td class="tb">배송지</td>
				<td class="tb">환불 계좌</td>
				<td class="tb">기타 정보</td>
				<td class="tb">상태</td>
			</tr>
			<tr th:each="join : ${gp.joinList}" th:unless="${#lists.isEmpty(gp.joinList)}">
				<td class="tb" th:text="${join.regDate}">폼 제출 시간</td>
				<td class="tb" th:text="${join.consumerName}">박솜솜</td>
				<td class="tb" th:text="${join.totalAmount}">10000</td>
				<td class="tb" th:text="${join.address}">배송지</td>
				<td class="tb" th:text="${join.refundAccount}">환불 계좌</td>
				<td class="tb" th:text="${join.shippingRequest}">기타 정보</td>
				<td class="tb">
					 <form id="updateStatus" th:action="@{/user/my/gp/join/status/update}" method="POST">
						<input type="hidden" id="joinId" name="joinId" th:value="${join.joinId}" />
						<input type="hidden" id="gpId" name="gpId" th:value="${gp.gpId}" />
						<select name="status" class="status">
							<option th:each="status : ${joinStatus}" th:value="${status.key}" th:text="${status.value}"
									th:selected="${status.key} == ${join.status} ? 'selected'">상태</option>
						</select>
						&nbsp;&nbsp;
						<input type="submit" class="statusBtn" value="변경" />
					</form>	
				</td>
			</tr>
			<tr th:if="${#lists.isEmpty(gp.joinList)}">
				<td class="element" colspan="8">
					<a>아직 참여자가 없습니다.<br></a>
				</td>
			</tr>
		</table>
	</div>
	<div style="height:10px;"></div>
	<div style="text-align:right;">
		<form id="updateAllStatus" th:action="@{/user/my/gp/join/status/all/update}" method="POST">
			<input type="hidden" id="gpId" name="gpId" th:value="${gp.gpId}" />
			<select name="status" class="status">
				<option value="none">==상태 변경==</option>
				<option th:each="status : ${joinStatus}" th:value="${status.key}" th:text="${status.value}">상태</option>
			</select>
			&nbsp;&nbsp;
			<input type="submit" class="statusBtn" value="상태 일괄 변경" />
		</form>		
	</div>
</div>
</body>
</html>